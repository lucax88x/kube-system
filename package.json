{
  "name": "kube-system",
  "version": "1.0.0",
  "main": "index.js",
  "repository": "git@github.com:lucax88x/kube-system.git",
  "author": "lucatrazzi <luca.trazzi@garaio.com>",
  "license": "MIT",
  "scripts": {
    "start:libvirt": "vagrant up --provider libvirt --no-destroy-on-error",
    "start": "vagrant up --provider virtualbox --no-provision",
    "down": "vagrant destroy -f",
    "stop": "yarn stop",
    "up": "yarn start",
    "sync": "vagrant rsync",
    "vagrant:provision": "vagrant provision",
    "provision" : "ansible-playbook -u vagrant -i .vagrant/provisioners/ansible/inventory/vagrant_ansible_inventory",
    "provision:dev" : "yarn provision:main:dev && yarn provision:k8s:dev",
    "provision:main:dev" : "yarn provision playbooks/main.yml --extra-vars 'env=dev'",
    "provision:k8s:dev" : "yarn provision playbooks/k8s.yml --extra-vars 'env=dev'",
    "ssh": "vagrant ssh",
    "ansible:install": "ansible-galaxy install -r requirements.yml",
    "vagrant:k8s:copy-config": "vagrant ssh k8s-master -c 'cat ~/.kube/config' > ~/.kube/bare-metal.config",
    "vagrant:registry:login": "docker login 192.168.56.10:5000 --username lucax88x",
    "vagrant:k8s:proxy": "KUBECONFIG=~/.kube/bare-metal.config proxy --address 0.0.0.0 --accept-hosts .*",
    "vagrant:k8s:dashboard": "google-chrome-stable http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/#/login",
    "vagrant:k8s:token": "KUBECONFIG=~/.kube/bare-metal.config ~/.kube/bare-metal-config -n kube-system describe secret $(kubectl --kubeconfig ~/.kube/bare-metal-config -n kube-system get secret | grep admin-user | awk '{print $1}')",
    "traefik:dashboard": "KUBECONFIG=~/.kube/bare-metal.config kubectl port-forward $(kubectl get pods --selector 'app.kubernetes.io/name=traefik' --output=name -n traefik) 9000:9000 -n traefik",
    "grafana:dashboard": "KUBECONFIG=~/.kube/bare-metal.config kubectl port-forward $(kubectl get pods -n monitoring -o name | grep grafana) 8080:3000 -n monitoring",
    "k8s:proxy": "kubectl proxy --address 0.0.0.0 --accept-hosts .*",
    "k8s:dashboard": "google-chrome-stable http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/#/login",
    "k8s:token": "kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep admin-user | awk '{print $1}')"
  }
}
